<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SCORM Test Constructor ‚Äî Sequence Diagram</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #fff;
      padding: 30px;
      color: #333;
    }
    
    h1 {
      text-align: center;
      font-size: 24px;
      margin-bottom: 5px;
      color: #1a1a2e;
    }
    
    .subtitle {
      text-align: center;
      color: #666;
      font-size: 12px;
      margin-bottom: 30px;
    }
    
    .diagram-wrapper {
      overflow-x: auto;
      padding-bottom: 20px;
    }
    
    .sequence-diagram {
      min-width: 1400px;
      margin: 0 auto;
    }
    
    /* Actor boxes at top */
    .actors {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0;
    }
    
    .actor {
      width: 140px;
      text-align: center;
    }
    
    .actor-box {
      background: #e8f4fd;
      border: 2px solid #3498db;
      border-radius: 8px;
      padding: 12px 8px;
      margin-bottom: 0;
    }
    
    .actor-icon {
      font-size: 24px;
      margin-bottom: 5px;
    }
    
    .actor-name {
      font-weight: 600;
      font-size: 11px;
      color: #2c3e50;
    }
    
    .actor-tech {
      font-size: 9px;
      color: #7f8c8d;
      margin-top: 3px;
    }
    
    /* Lifelines */
    .lifelines-container {
      position: relative;
      min-height: 7800px;
    }
    
    .lifeline {
      position: absolute;
      width: 2px;
      background: #bdc3c7;
      top: 0;
      bottom: 0;
    }
    
    .lifeline-1 { left: 70px; }
    .lifeline-2 { left: 280px; }
    .lifeline-3 { left: 490px; }
    .lifeline-4 { left: 700px; }
    .lifeline-5 { left: 910px; }
    .lifeline-6 { left: 1120px; }
    .lifeline-7 { left: 1330px; }
    
    /* Messages */
    .message {
      position: absolute;
      display: flex;
      align-items: center;
      font-size: 10px;
      height: 30px;
    }
    
    .message-line {
      height: 2px;
      background: #2c3e50;
      flex-grow: 1;
      position: relative;
    }
    
    .message-line.dashed {
      background: transparent;
      border-top: 2px dashed #7f8c8d;
    }
    
    .message-line::after {
      content: '';
      position: absolute;
      right: -1px;
      top: -5px;
      border: 6px solid transparent;
      border-left: 8px solid #2c3e50;
    }
    
    .message-line.dashed::after {
      border-left-color: #7f8c8d;
    }
    
    .message-line.left::after {
      right: auto;
      left: -1px;
      border-left: none;
      border-right: 8px solid #2c3e50;
    }
    
    .message-line.left.dashed::after {
      border-right-color: #7f8c8d;
    }
    
    .message-text {
      position: absolute;
      top: -18px;
      left: 50%;
      transform: translateX(-50%);
      background: #fff;
      padding: 2px 8px;
      white-space: nowrap;
      font-size: 10px;
      color: #2c3e50;
      border-radius: 3px;
    }
    
    .message-protocol {
      position: absolute;
      bottom: -14px;
      left: 50%;
      transform: translateX(-50%);
      background: #f8f9fa;
      padding: 1px 6px;
      font-size: 8px;
      color: #95a5a6;
      border-radius: 2px;
      border: 1px solid #ecf0f1;
    }
    
    /* Section dividers */
    .section-divider {
      position: absolute;
      left: 0;
      right: 0;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .section-divider::before,
    .section-divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: #e0e0e0;
    }
    
    .section-label {
      background: #f5f5f5;
      padding: 5px 15px;
      border-radius: 15px;
      font-size: 11px;
      font-weight: 600;
      color: #666;
      white-space: nowrap;
    }
    
    /* Activation boxes */
    .activation {
      position: absolute;
      width: 12px;
      background: #ecf0f1;
      border: 1px solid #bdc3c7;
      border-radius: 2px;
      margin-left: -6px;
    }
    
    /* Notes */
    .note {
      position: absolute;
      background: #fffde7;
      border: 1px solid #ffd54f;
      border-radius: 4px;
      padding: 6px 10px;
      font-size: 9px;
      max-width: 150px;
      line-height: 1.4;
    }
    
    .note::before {
      content: '‚ö†Ô∏è';
      margin-right: 4px;
    }
    
    /* Footer */
    .footer {
      text-align: center;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #eee;
      color: #999;
      font-size: 11px;
    }
    
    /* Legend */
    .legend {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-bottom: 25px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 12px;
    }
    
    .legend-line {
      width: 50px;
      height: 2px;
      background: #2c3e50;
      position: relative;
    }
    
    .legend-line::after {
      content: '';
      position: absolute;
      right: 0;
      top: -4px;
      border: 5px solid transparent;
      border-left: 7px solid #2c3e50;
    }
    
    .legend-line.dashed {
      background: transparent;
      border-top: 2px dashed #7f8c8d;
    }
    
    .legend-line.dashed::after {
      border-left-color: #7f8c8d;
    }
  </style>
</head>
<body>
  <h1>SCORM Test Constructor ‚Äî Call-Flow Diagram</h1>
  <p class="subtitle">–î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã</p>
  
  <div class="legend">
    <div class="legend-item">
      <div class="legend-line"></div>
      <span>–ó–∞–ø—Ä–æ—Å (Request)</span>
    </div>
    <div class="legend-item">
      <div class="legend-line dashed"></div>
      <span>–û—Ç–≤–µ—Ç (Response)</span>
    </div>
  </div>
  
  <div class="diagram-wrapper">
    <div class="sequence-diagram">
      <!-- Actors -->
      <div class="actors">
        <div class="actor">
          <div class="actor-box">
            <div class="actor-icon">üë®‚Äçüíº</div>
            <div class="actor-name">–ê–≤—Ç–æ—Ä</div>
            <div class="actor-tech">Author</div>
          </div>
        </div>
        <div class="actor">
          <div class="actor-box">
            <div class="actor-icon">‚öõÔ∏è</div>
            <div class="actor-name">Frontend</div>
            <div class="actor-tech">React + Vite</div>
          </div>
        </div>
        <div class="actor">
          <div class="actor-box">
            <div class="actor-icon">üöÄ</div>
            <div class="actor-name">Backend API</div>
            <div class="actor-tech">Node.js + Express</div>
          </div>
        </div>
        <div class="actor">
          <div class="actor-box">
            <div class="actor-icon">üóÑÔ∏è</div>
            <div class="actor-name">PostgreSQL</div>
            <div class="actor-tech">Drizzle ORM</div>
          </div>
        </div>
        <div class="actor">
          <div class="actor-box">
            <div class="actor-icon">üéØ</div>
            <div class="actor-name">LMS</div>
            <div class="actor-tech">WebSoft / Moodle</div>
          </div>
        </div>
        <div class="actor">
          <div class="actor-box">
            <div class="actor-icon">üì¶</div>
            <div class="actor-name">SCORM Package</div>
            <div class="actor-tech">HTML + JS</div>
          </div>
        </div>
        <div class="actor">
          <div class="actor-box">
            <div class="actor-icon">üéì</div>
            <div class="actor-name">Learner</div>
            <div class="actor-tech">–û–±—É—á–∞—é—â–∏–π—Å—è</div>
          </div>
        </div>
      </div>
      
      <!-- Lifelines and Messages -->
      <div class="lifelines-container">
        <!-- Lifelines -->
        <div class="lifeline lifeline-1"></div>
        <div class="lifeline lifeline-2"></div>
        <div class="lifeline lifeline-3"></div>
        <div class="lifeline lifeline-4"></div>
        <div class="lifeline lifeline-5"></div>
        <div class="lifeline lifeline-6"></div>
        <div class="lifeline lifeline-7"></div>
        
        <!-- SECTION 1: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
        <div class="section-divider" style="top: 20px;">
          <span class="section-label">üìù 1. –°–û–ó–î–ê–ù–ò–ï –ö–û–ù–¢–ï–ù–¢–ê (–ê–≤—Ç–æ—Ä)</span>
        </div>
        
        <!-- Author -> Frontend: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞ -->
        <div class="message" style="top: 60px; left: 70px; width: 210px;">
          <div class="message-line">
            <span class="message-text">–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–º, –≤–æ–ø—Ä–æ—Å–æ–≤, —Ç–µ—Å—Ç–∞</span>
            <span class="message-protocol">UI</span>
          </div>
        </div>
        
        <!-- Frontend -> Backend: POST /api/tests -->
        <div class="message" style="top: 100px; left: 280px; width: 210px;">
          <div class="message-line">
            <span class="message-text">POST /api/tests</span>
            <span class="message-protocol">HTTPS / JSON</span>
          </div>
        </div>
        
        <!-- Backend -> PostgreSQL: INSERT -->
        <div class="message" style="top: 140px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">INSERT INTO tests, questions...</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- PostgreSQL -> Backend: OK -->
        <div class="message" style="top: 180px; left: 490px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">rows affected</span>
          </div>
        </div>
        
        <!-- Backend -> Frontend: 201 Created -->
        <div class="message" style="top: 220px; left: 280px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">201 Created { test }</span>
            <span class="message-protocol">JSON</span>
          </div>
        </div>
        
        <!-- SECTION 2: –≠–∫—Å–ø–æ—Ä—Ç SCORM -->
        <div class="section-divider" style="top: 280px;">
          <span class="section-label">üì¶ 2. –≠–ö–°–ü–û–†–¢ SCORM –ü–ê–ö–ï–¢–ê</span>
        </div>
        
        <!-- Author -> Frontend: –≠–∫—Å–ø–æ—Ä—Ç -->
        <div class="message" style="top: 320px; left: 70px; width: 210px;">
          <div class="message-line">
            <span class="message-text">–ù–∞–∂–∞—Ç–∏–µ "–≠–∫—Å–ø–æ—Ä—Ç SCORM"</span>
            <span class="message-protocol">UI</span>
          </div>
        </div>
        
        <!-- Frontend -> Backend: GET /api/tests/:id/export/scorm -->
        <div class="message" style="top: 360px; left: 280px; width: 210px;">
          <div class="message-line">
            <span class="message-text">GET /api/tests/:id/export/scorm</span>
            <span class="message-protocol">HTTPS</span>
          </div>
        </div>
        
        <!-- Backend -> PostgreSQL: SELECT test data -->
        <div class="message" style="top: 400px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">SELECT test, questions, topics...</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- PostgreSQL -> Backend: test data -->
        <div class="message" style="top: 440px; left: 490px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">test data + questions</span>
          </div>
        </div>
        
        <!-- Backend generates SCORM -->
        <div class="note" style="top: 470px; left: 420px;">
          –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ZIP: manifest.xml, index.html, app.js, media files
        </div>
        
        <!-- Backend -> PostgreSQL: INSERT scorm_packages -->
        <div class="message" style="top: 520px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">INSERT INTO scorm_packages</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- PostgreSQL -> Backend: OK -->
        <div class="message" style="top: 560px; left: 490px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">package_id, secret_key</span>
          </div>
        </div>
        
        <!-- Backend -> Frontend: SCORM ZIP -->
        <div class="message" style="top: 600px; left: 280px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">200 OK + SCORM.zip (binary)</span>
            <span class="message-protocol">application/zip</span>
          </div>
        </div>
        
        <!-- Frontend -> Author: Download -->
        <div class="message" style="top: 640px; left: 70px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞</span>
          </div>
        </div>
        
        <!-- SECTION 3: –ó–∞–≥—Ä—É–∑–∫–∞ –≤ LMS -->
        <div class="section-divider" style="top: 700px;">
          <span class="section-label">üéØ 3. –ó–ê–ì–†–£–ó–ö–ê –í LMS</span>
        </div>
        
        <!-- Author -> LMS: Upload SCORM -->
        <div class="message" style="top: 740px; left: 70px; width: 630px;">
          <div class="message-line">
            <span class="message-text">–ó–∞–≥—Ä—É–∑–∫–∞ SCORM –ø–∞–∫–µ—Ç–∞ –≤ LMS</span>
            <span class="message-protocol">HTTPS / Upload</span>
          </div>
        </div>
        
        <!-- LMS -> Author: OK -->
        <div class="message" style="top: 780px; left: 70px; width: 630px;">
          <div class="message-line dashed left">
            <span class="message-text">–ö—É—Ä—Å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω</span>
          </div>
        </div>
        
        <!-- SECTION 4: –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞ -->
        <div class="section-divider" style="top: 840px;">
          <span class="section-label">üéì 4. –ü–†–û–•–û–ñ–î–ï–ù–ò–ï –¢–ï–°–¢–ê (Learner)</span>
        </div>
        
        <!-- Learner -> LMS: –ó–∞–ø—É—Å–∫ –∫—É—Ä—Å–∞ -->
        <div class="message" style="top: 880px; left: 700px; width: 630px;">
          <div class="message-line left">
            <span class="message-text">–ó–∞–ø—É—Å–∫ –∫—É—Ä—Å–∞ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</span>
            <span class="message-protocol">HTTPS</span>
          </div>
        </div>
        
        <!-- LMS -> SCORM: Load in iframe -->
        <div class="message" style="top: 920px; left: 910px; width: 210px;">
          <div class="message-line left">
            <span class="message-text">–ó–∞–≥—Ä—É–∑–∫–∞ SCORM –≤ iframe</span>
            <span class="message-protocol">HTTPS</span>
          </div>
        </div>
        
        <!-- SCORM -> LMS: API_1484_11.Initialize -->
        <div class="message" style="top: 960px; left: 700px; width: 210px;">
          <div class="message-line left">
            <span class="message-text">API_1484_11.Initialize("")</span>
            <span class="message-protocol">JS API</span>
          </div>
        </div>
        
        <!-- LMS -> SCORM: "true" -->
        <div class="message" style="top: 1000px; left: 700px; width: 210px;">
          <div class="message-line dashed">
            <span class="message-text">"true"</span>
          </div>
        </div>
        
        <!-- SCORM -> LMS: GetValue learner_id -->
        <div class="message" style="top: 1040px; left: 700px; width: 210px;">
          <div class="message-line left">
            <span class="message-text">GetValue("cmi.learner_id")</span>
            <span class="message-protocol">JS API</span>
          </div>
        </div>
        
        <!-- LMS -> SCORM: user data -->
        <div class="message" style="top: 1080px; left: 700px; width: 210px;">
          <div class="message-line dashed">
            <span class="message-text">"user_12345"</span>
          </div>
        </div>
        
        <!-- SECTION 5: –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è -->
        <div class="section-divider" style="top: 1140px;">
          <span class="section-label">üì° 5. –¢–ï–õ–ï–ú–ï–¢–†–ò–Ø (–æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä)</span>
        </div>
        
        <!-- SCORM -> Backend: /start -->
        <div class="message" style="top: 1180px; left: 490px; width: 420px;">
          <div class="message-line left">
            <span class="message-text">POST /api/scorm-telemetry/start { packageId, sessionId, signature }</span>
            <span class="message-protocol">HTTPS / HMAC-SHA256</span>
          </div>
        </div>
        
        <!-- Backend -> PostgreSQL: INSERT attempt -->
        <div class="message" style="top: 1220px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">INSERT INTO scorm_attempts</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- PostgreSQL -> Backend: OK -->
        <div class="message" style="top: 1260px; left: 490px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">attempt_id</span>
          </div>
        </div>
        
        <!-- Backend -> SCORM: 200 OK -->
        <div class="message" style="top: 1300px; left: 490px; width: 420px;">
          <div class="message-line dashed">
            <span class="message-text">200 OK { attemptNumber: 1 }</span>
          </div>
        </div>
        
        <!-- SCORM -> Backend: /answer -->
        <div class="message" style="top: 1360px; left: 490px; width: 420px;">
          <div class="message-line left">
            <span class="message-text">POST /api/scorm-telemetry/answer { questionId, userAnswer, isCorrect }</span>
            <span class="message-protocol">HTTPS / HMAC-SHA256</span>
          </div>
        </div>
        
        <!-- Backend -> PostgreSQL: INSERT answer -->
        <div class="message" style="top: 1400px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">INSERT INTO scorm_answers</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- Note: –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ -->
        <div class="note" style="top: 1430px; left: 630px; background: #e3f2fd; border-color: #2196f3;">
          –ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å
        </div>
        
        <!-- SECTION 6: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞ -->
        <div class="section-divider" style="top: 1500px;">
          <span class="section-label">‚úÖ 6. –ó–ê–í–ï–†–®–ï–ù–ò–ï –¢–ï–°–¢–ê</span>
        </div>
        
        <!-- SCORM -> Backend: /finish -->
        <div class="message" style="top: 1540px; left: 490px; width: 420px;">
          <div class="message-line left">
            <span class="message-text">POST /api/scorm-telemetry/finish { percent, passed, earnedPoints }</span>
            <span class="message-protocol">HTTPS / HMAC-SHA256</span>
          </div>
        </div>
        
        <!-- Backend -> PostgreSQL: UPDATE attempt -->
        <div class="message" style="top: 1580px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">UPDATE scorm_attempts SET result...</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- PostgreSQL -> Backend: OK -->
        <div class="message" style="top: 1620px; left: 490px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">OK</span>
          </div>
        </div>
        
        <!-- SCORM -> LMS: SetValue score -->
        <div class="message" style="top: 1680px; left: 700px; width: 210px;">
          <div class="message-line left">
            <span class="message-text">SetValue("cmi.score.raw", 85)</span>
            <span class="message-protocol">JS API</span>
          </div>
        </div>
        
        <!-- SCORM -> LMS: SetValue completion -->
        <div class="message" style="top: 1720px; left: 700px; width: 210px;">
          <div class="message-line left">
            <span class="message-text">SetValue("cmi.completion_status", "completed")</span>
            <span class="message-protocol">JS API</span>
          </div>
        </div>
        
        <!-- SCORM -> LMS: Commit + Terminate -->
        <div class="message" style="top: 1760px; left: 700px; width: 210px;">
          <div class="message-line left">
            <span class="message-text">Commit("") + Terminate("")</span>
            <span class="message-protocol">JS API</span>
          </div>
        </div>
        
        <!-- LMS -> SCORM: "true" -->
        <div class="message" style="top: 1800px; left: 700px; width: 210px;">
          <div class="message-line dashed">
            <span class="message-text">"true"</span>
          </div>
        </div>
        
        <!-- SECTION 7: –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ -->
        <div class="section-divider" style="top: 1860px;">
          <span class="section-label">üìä 7. –ü–û–ö–ê–ó –†–ï–ó–£–õ–¨–¢–ê–¢–û–í –ò –û–ë–†–ê–¢–ù–û–ô –°–í–Ø–ó–ò</span>
        </div>
        
        <!-- SCORM –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
        <div class="note" style="top: 1900px; left: 860px; background: #e8f5e9; border-color: #4caf50;">
          SCORM –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º, –±–∞–ª–ª–∞–º–∏, —Å—Ç–∞—Ç—É—Å–æ–º –ø—Ä–æ–π–¥–µ–Ω/–Ω–µ –ø—Ä–æ–π–¥–µ–Ω
        </div>
        
        <!-- SCORM -> Learner: –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ —Ç–µ–º–∞–º -->
        <div class="message" style="top: 1960px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">–ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ —Ç–µ–º–∞–º (topicResults)</span>
            <span class="message-protocol">UI render</span>
          </div>
        </div>
        
        <!-- SCORM -> Learner: –ü–æ–∫–∞–∑ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –ø–æ –Ω–µ–ø—Ä–æ–π–¥–µ–Ω–Ω—ã–º —Ç–µ–º–∞–º -->
        <div class="message" style="top: 2010px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ –Ω–µ–ø—Ä–æ–π–¥–µ–Ω–Ω—ã–º —Ç–µ–º–∞–º (topicFeedback)</span>
            <span class="message-protocol">UI render</span>
          </div>
        </div>
        
        <!-- Note: Feedback –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è failed topics -->
        <div class="note" style="top: 2040px; left: 1050px; background: #fff3e0; border-color: #ff9800;">
          Feedback –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–º —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º passed=false
        </div>
        
        <!-- SCORM -> Learner: –ü–æ–∫–∞–∑ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ -->
        <div class="message" style="top: 2100px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –∫—É—Ä—Å—ã (recommendedCourses)</span>
            <span class="message-protocol">UI render</span>
          </div>
        </div>
        
        <!-- Note: Courses –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è failed topics -->
        <div class="note" style="top: 2130px; left: 1050px; background: #fff3e0; border-color: #ff9800;">
          –ö—É—Ä—Å—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ–ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —Ç–µ–º
        </div>
        
        <!-- SECTION 8: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ PDF -->
        <div class="section-divider" style="top: 2200px;">
          <span class="section-label">üìÑ 8. –°–ö–ê–ß–ò–í–ê–ù–ò–ï PDF –†–ï–ó–£–õ–¨–¢–ê–¢–û–í</span>
        </div>
        
        <!-- Note: PDF –¥–æ—Å—Ç—É–ø–µ–Ω –∫–æ–≥–¥–∞ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å -->
        <div class="note" style="top: 2240px; left: 860px; background: #e3f2fd; border-color: #2196f3;">
          –ö–Ω–æ–ø–∫–∞ "–°–∫–∞—á–∞—Ç—å PDF" –¥–æ—Å—Ç—É–ø–Ω–∞ –∫–æ–≥–¥–∞: –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å –ò–õ–ò —Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω
        </div>
        
        <!-- Learner -> SCORM: –ù–∞–∂–∞—Ç–∏–µ "–°–∫–∞—á–∞—Ç—å PDF" -->
        <div class="message" style="top: 2300px; left: 910px; width: 420px;">
          <div class="message-line left">
            <span class="message-text">–ù–∞–∂–∞—Ç–∏–µ "–°–∫–∞—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (PDF)"</span>
            <span class="message-protocol">UI click</span>
          </div>
        </div>
        
        <!-- SCORM –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç loading overlay -->
        <div class="message" style="top: 2350px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">–ü–æ–∫–∞–∑ –æ–≤–µ—Ä–ª–µ—è "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF..."</span>
            <span class="message-protocol">UI render</span>
          </div>
        </div>
        
        <!-- SCORM: getBestAttempt() -->
        <div class="note" style="top: 2390px; left: 860px; background: #f3e5f5; border-color: #9c27b0;">
          getBestAttempt() ‚Äî –≤—ã–±–æ—Ä –ª—É—á—à–µ–π –ø–æ–ø—ã—Ç–∫–∏ –∏–∑ suspend_data –ø–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É percent
        </div>
        
        <!-- SCORM: loadPdfAssets -->
        <div class="message" style="top: 2450px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">–ó–∞–≥—Ä—É–∑–∫–∞ –∞—Å—Å–µ—Ç–æ–≤: pdf-bg-1/2/3.png, logo-light.png</span>
            <span class="message-protocol">async load</span>
          </div>
        </div>
        
        <!-- SCORM: generatePdfHtml -->
        <div class="message" style="top: 2500px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">generatePdfHtml() ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ HTML —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏</span>
            <span class="message-protocol">JS</span>
          </div>
        </div>
        
        <!-- Note: —á—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ PDF -->
        <div class="note" style="top: 2530px; left: 1050px; background: #e8f5e9; border-color: #4caf50; max-width: 200px;">
          PDF —Å–æ–¥–µ—Ä–∂–∏—Ç: –∑–∞–≥–æ–ª–æ–≤–æ–∫, % –∏ —Å—Ç–∞—Ç—É—Å, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Ç–µ–º–∞–º, feedback (–¥–ª—è failed), —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –∫—É—Ä—Å—ã
        </div>
        
        <!-- SCORM: html2canvas -->
        <div class="message" style="top: 2620px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">html2canvas() ‚Äî —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ HTML –≤ canvas</span>
            <span class="message-protocol">html2canvas lib</span>
          </div>
        </div>
        
        <!-- SCORM: jsPDF -->
        <div class="message" style="top: 2670px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">jsPDF.addImage() + pdf.link() –¥–ª—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫</span>
            <span class="message-protocol">jsPDF lib</span>
          </div>
        </div>
        
        <!-- SCORM -> Learner: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ PDF -->
        <div class="message" style="top: 2720px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">pdf.save("–†–µ–∑—É–ª—å—Ç–∞—Ç—ã_TestName_DD_MM_YYYY.pdf")</span>
            <span class="message-protocol">download</span>
          </div>
        </div>
        
        <!-- SCORM: —É–±–∏—Ä–∞–µ–º loading overlay -->
        <div class="message" style="top: 2770px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">–°–∫—Ä—ã—Ç–∏–µ –æ–≤–µ—Ä–ª–µ—è –∑–∞–≥—Ä—É–∑–∫–∏</span>
            <span class="message-protocol">UI render</span>
          </div>
        </div>
        
        <!-- Learner –ø–æ–ª—É—á–∞–µ—Ç PDF -->
        <div class="message" style="top: 2820px; left: 910px; width: 420px;">
          <div class="message-line dashed left">
            <span class="message-text">PDF —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—ë–Ω –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</span>
          </div>
        </div>
        
        <!-- SECTION 9: –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ -->
        <div class="section-divider" style="top: 2900px;">
          <span class="section-label">üìä 9. –ü–†–û–°–ú–û–¢–† –ê–ù–ê–õ–ò–¢–ò–ö–ò (–ê–≤—Ç–æ—Ä/–ê–¥–º–∏–Ω)</span>
        </div>
        
        <!-- Author -> Frontend: –û—Ç–∫—Ä—ã—Ç–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ -->
        <div class="message" style="top: 2950px; left: 70px; width: 210px;">
          <div class="message-line">
            <span class="message-text">–û—Ç–∫—Ä—ã—Ç–∏–µ —Ä–∞–∑–¥–µ–ª–∞ "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"</span>
            <span class="message-protocol">UI</span>
          </div>
        </div>
        
        <!-- Frontend -> Backend: GET /api/analytics -->
        <div class="message" style="top: 3000px; left: 280px; width: 210px;">
          <div class="message-line">
            <span class="message-text">GET /api/analytics</span>
            <span class="message-protocol">HTTPS</span>
          </div>
        </div>
        
        <!-- Backend -> PostgreSQL: SELECT –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="message" style="top: 3050px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">SELECT COUNT(*) FROM tests, attempts...</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- PostgreSQL -> Backend: stats -->
        <div class="message" style="top: 3100px; left: 490px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">{ totalTests, totalAttempts, avgScore... }</span>
          </div>
        </div>
        
        <!-- Backend -> Frontend: analytics data -->
        <div class="message" style="top: 3150px; left: 280px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">200 OK { summary, tests[] }</span>
            <span class="message-protocol">JSON</span>
          </div>
        </div>
        
        <!-- Frontend -> Author: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞ -->
        <div class="message" style="top: 3200px; left: 70px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">–î–∞—à–±–æ—Ä–¥ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π</span>
          </div>
        </div>
        
        <!-- SECTION 10: –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ —Ç–µ—Å—Ç—É -->
        <div class="section-divider" style="top: 3270px;">
          <span class="section-label">üîç 10. –î–ï–¢–ê–õ–¨–ù–ê–Ø –ê–ù–ê–õ–ò–¢–ò–ö–ê –ü–û –¢–ï–°–¢–£</span>
        </div>
        
        <!-- Author -> Frontend: –í—ã–±–æ—Ä —Ç–µ—Å—Ç–∞ -->
        <div class="message" style="top: 3320px; left: 70px; width: 210px;">
          <div class="message-line">
            <span class="message-text">–í—ã–±–æ—Ä —Ç–µ—Å—Ç–∞ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</span>
            <span class="message-protocol">UI click</span>
          </div>
        </div>
        
        <!-- Frontend -> Backend: GET /api/analytics/tests/:testId -->
        <div class="message" style="top: 3370px; left: 280px; width: 210px;">
          <div class="message-line">
            <span class="message-text">GET /api/analytics/tests/:testId</span>
            <span class="message-protocol">HTTPS</span>
          </div>
        </div>
        
        <!-- Backend -> PostgreSQL: SELECT –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="message" style="top: 3420px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">SELECT attempts, answers, topics...</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- PostgreSQL -> Backend: detailed stats -->
        <div class="message" style="top: 3470px; left: 490px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">–ø–æ–ø—ã—Ç–∫–∏, –æ—Ç–≤–µ—Ç—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º</span>
          </div>
        </div>
        
        <!-- Note: —á—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ -->
        <div class="note" style="top: 3500px; left: 420px; background: #e8f5e9; border-color: #4caf50; max-width: 180px;">
          –í–∫–ª—é—á–∞–µ—Ç: passRate, avgPercent, topicStats, questionStats, scoreDistribution, dailyTrends
        </div>
        
        <!-- Backend -> Frontend: test analytics -->
        <div class="message" style="top: 3580px; left: 280px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">200 OK { summary, topicStats[], questionStats[] }</span>
            <span class="message-protocol">JSON</span>
          </div>
        </div>
        
        <!-- Frontend -> Author: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ -->
        <div class="message" style="top: 3630px; left: 70px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">–ì—Ä–∞—Ñ–∏–∫–∏, —Ç–∞–±–ª–∏—Ü—ã, —Å–ø–∏—Å–æ–∫ –ø–æ–ø—ã—Ç–æ–∫</span>
          </div>
        </div>
        
        <!-- SECTION 11: –ü—Ä–æ—Å–º–æ—Ç—Ä SCORM —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ -->
        <div class="section-divider" style="top: 3700px;">
          <span class="section-label">üì° 11. –ü–†–û–°–ú–û–¢–† SCORM –¢–ï–õ–ï–ú–ï–¢–†–ò–ò</span>
        </div>
        
        <!-- Frontend -> Backend: GET /api/analytics/scorm-attempts -->
        <div class="message" style="top: 3750px; left: 280px; width: 210px;">
          <div class="message-line">
            <span class="message-text">GET /api/analytics/scorm-attempts</span>
            <span class="message-protocol">HTTPS</span>
          </div>
        </div>
        
        <!-- Backend -> PostgreSQL: SELECT scorm data -->
        <div class="message" style="top: 3800px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">SELECT FROM scorm_attempts, scorm_answers</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- PostgreSQL -> Backend: scorm attempts -->
        <div class="message" style="top: 3850px; left: 490px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">–ø–æ–ø—ã—Ç–∫–∏ –∏–∑ LMS —Å lms_user_id, lms_user_name</span>
          </div>
        </div>
        
        <!-- Backend -> Frontend: scorm analytics -->
        <div class="message" style="top: 3900px; left: 280px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">200 OK { attempts[], packages[] }</span>
            <span class="message-protocol">JSON</span>
          </div>
        </div>
        
        <!-- Note: –¥–∞–Ω–Ω—ã–µ –∏–∑ LMS -->
        <div class="note" style="top: 3930px; left: 200px; background: #fff3e0; border-color: #ff9800; max-width: 180px;">
          –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ LMS: learner_id, learner_name, email, org
        </div>
        
        <!-- SECTION 12: –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ –≤ Excel -->
        <div class="section-divider" style="top: 4020px;">
          <span class="section-label">üì• 12. –≠–ö–°–ü–û–†–¢ –û–¢–ß–Å–¢–û–í –í EXCEL</span>
        </div>
        
        <!-- Author -> Frontend: –ù–∞–∂–∞—Ç–∏–µ "–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel" -->
        <div class="message" style="top: 4070px; left: 70px; width: 210px;">
          <div class="message-line">
            <span class="message-text">–ù–∞–∂–∞—Ç–∏–µ "–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel"</span>
            <span class="message-protocol">UI click</span>
          </div>
        </div>
        
        <!-- Frontend -> Backend: POST /api/export/excel -->
        <div class="message" style="top: 4120px; left: 280px; width: 210px;">
          <div class="message-line">
            <span class="message-text">POST /api/export/excel { filters }</span>
            <span class="message-protocol">HTTPS / JSON</span>
          </div>
        </div>
        
        <!-- Note: —Ñ–∏–ª—å—Ç—Ä—ã —ç–∫—Å–ø–æ—Ä—Ç–∞ -->
        <div class="note" style="top: 4150px; left: 200px; background: #e3f2fd; border-color: #2196f3; max-width: 180px;">
          –§–∏–ª—å—Ç—Ä—ã: testId, dateFrom, dateTo, packageId, lmsUserId, passed
        </div>
        
        <!-- Backend -> PostgreSQL: SELECT filtered data -->
        <div class="message" style="top: 4220px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">SELECT attempts, answers WHERE filters...</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- PostgreSQL -> Backend: filtered results -->
        <div class="message" style="top: 4270px; left: 490px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">–æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –∏ –æ—Ç–≤–µ—Ç—ã</span>
          </div>
        </div>
        
        <!-- Backend generates Excel -->
        <div class="note" style="top: 4310px; left: 420px; background: #f3e5f5; border-color: #9c27b0; max-width: 200px;">
          –ì–µ–Ω–µ—Ä–∞—Ü–∏—è XLSX —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É xlsx: –ª–∏—Å—Ç—ã "–ü–æ–ø—ã—Ç–∫–∏", "–û—Ç–≤–µ—Ç—ã", "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
        </div>
        
        <!-- Backend -> Frontend: Excel file -->
        <div class="message" style="top: 4390px; left: 280px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">200 OK + report.xlsx (binary)</span>
            <span class="message-protocol">application/xlsx</span>
          </div>
        </div>
        
        <!-- Frontend -> Author: Download -->
        <div class="message" style="top: 4440px; left: 70px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">–°–∫–∞—á–∏–≤–∞–Ω–∏–µ Excel —Ñ–∞–π–ª–∞</span>
          </div>
        </div>
        
        <!-- SECTION 13: –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è LMS (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π) -->
        <div class="section-divider" style="top: 4510px;">
          <span class="section-label">üìä 13. –≠–ö–°–ü–û–†–¢ –î–õ–Ø LMS (–†–ê–°–®–ò–†–ï–ù–ù–´–ô)</span>
        </div>
        
        <!-- Frontend -> Backend: POST /api/export/excel-lms -->
        <div class="message" style="top: 4560px; left: 280px; width: 210px;">
          <div class="message-line">
            <span class="message-text">POST /api/export/excel-lms { packageIds }</span>
            <span class="message-protocol">HTTPS</span>
          </div>
        </div>
        
        <!-- Backend -> PostgreSQL: SELECT LMS data -->
        <div class="message" style="top: 4610px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">SELECT scorm_packages, scorm_attempts...</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- PostgreSQL -> Backend: LMS results -->
        <div class="message" style="top: 4660px; left: 490px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">–¥–∞–Ω–Ω—ã–µ –ø–æ –ø–∞–∫–µ—Ç–∞–º –∏ –ø–æ–ø—ã—Ç–∫–∞–º –∏–∑ LMS</span>
          </div>
        </div>
        
        <!-- Note: —á—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç LMS –æ—Ç—á—ë—Ç -->
        <div class="note" style="top: 4700px; left: 420px; background: #e8f5e9; border-color: #4caf50; max-width: 200px;">
          –í–∫–ª—é—á–∞–µ—Ç: –§–ò–û –∏–∑ LMS, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è, email, –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏, –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
        </div>
        
        <!-- Backend -> Frontend: LMS Excel -->
        <div class="message" style="top: 4780px; left: 280px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">200 OK + lms_report.xlsx</span>
            <span class="message-protocol">application/xlsx</span>
          </div>
        </div>
        
        <!-- Frontend -> Author: Download LMS report -->
        <div class="message" style="top: 4830px; left: 70px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">Excel —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ LMS</span>
          </div>
        </div>
        
        <!-- SECTION 14: –ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç –≤–æ–ø—Ä–æ—Å–æ–≤ -->
        <div class="section-divider" style="top: 4900px;">
          <span class="section-label">üì§ 14. –ò–ú–ü–û–†–¢/–≠–ö–°–ü–û–†–¢ –í–û–ü–†–û–°–û–í (Excel)</span>
        </div>
        
        <!-- Author -> Frontend: –ò–º–ø–æ—Ä—Ç –≤–æ–ø—Ä–æ—Å–æ–≤ -->
        <div class="message" style="top: 4950px; left: 70px; width: 210px;">
          <div class="message-line">
            <span class="message-text">–ó–∞–≥—Ä—É–∑–∫–∞ Excel —Ñ–∞–π–ª–∞ —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏</span>
            <span class="message-protocol">UI upload</span>
          </div>
        </div>
        
        <!-- Frontend -> Backend: POST /api/questions/import -->
        <div class="message" style="top: 5000px; left: 280px; width: 210px;">
          <div class="message-line">
            <span class="message-text">POST /api/questions/import (multipart)</span>
            <span class="message-protocol">HTTPS / FormData</span>
          </div>
        </div>
        
        <!-- Note: —Ñ–æ—Ä–º–∞—Ç Excel -->
        <div class="note" style="top: 5030px; left: 200px; background: #e3f2fd; border-color: #2196f3; max-width: 180px;">
          Excel —Ñ–æ—Ä–º–∞—Ç: topic, type, prompt, options, correct, points, difficulty
        </div>
        
        <!-- Backend -> PostgreSQL: INSERT questions -->
        <div class="message" style="top: 5100px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">INSERT INTO questions (batch)</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- PostgreSQL -> Backend: OK -->
        <div class="message" style="top: 5150px; left: 490px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">imported: N questions</span>
          </div>
        </div>
        
        <!-- Backend -> Frontend: import result -->
        <div class="message" style="top: 5200px; left: 280px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">200 OK { imported: N, errors[] }</span>
            <span class="message-protocol">JSON</span>
          </div>
        </div>
        
        <!-- –≠–∫—Å–ø–æ—Ä—Ç –≤–æ–ø—Ä–æ—Å–æ–≤ -->
        <div class="message" style="top: 5270px; left: 280px; width: 210px;">
          <div class="message-line">
            <span class="message-text">GET /api/questions/export?topicId=...</span>
            <span class="message-protocol">HTTPS</span>
          </div>
        </div>
        
        <!-- Backend -> Frontend: Excel -->
        <div class="message" style="top: 5320px; left: 280px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">200 OK + questions.xlsx</span>
            <span class="message-protocol">application/xlsx</span>
          </div>
        </div>
        
        <!-- SECTION 15: –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤ -->
        <div class="section-divider" style="top: 5390px;">
          <span class="section-label">üñºÔ∏è 15. –ó–ê–ì–†–£–ó–ö–ê –ú–ï–î–ò–ê –§–ê–ô–õ–û–í</span>
        </div>
        
        <!-- Author -> Frontend: Upload media -->
        <div class="message" style="top: 5440px; left: 70px; width: 210px;">
          <div class="message-line">
            <span class="message-text">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è/–≤–∏–¥–µ–æ/–∞—É–¥–∏–æ</span>
            <span class="message-protocol">UI upload</span>
          </div>
        </div>
        
        <!-- Frontend -> Backend: POST /api/media/upload -->
        <div class="message" style="top: 5490px; left: 280px; width: 210px;">
          <div class="message-line">
            <span class="message-text">POST /api/media/upload (multipart)</span>
            <span class="message-protocol">HTTPS / FormData</span>
          </div>
        </div>
        
        <!-- Note: —Ç–∏–ø—ã –º–µ–¥–∏–∞ -->
        <div class="note" style="top: 5520px; left: 200px; background: #fff3e0; border-color: #ff9800; max-width: 160px;">
          –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: image/*, audio/*, video/* (–¥–æ 200MB)
        </div>
        
        <!-- Backend saves to disk -->
        <div class="note" style="top: 5570px; left: 420px; background: #f3e5f5; border-color: #9c27b0; max-width: 160px;">
          –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ /uploads/media/ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º
        </div>
        
        <!-- Backend -> Frontend: media URL -->
        <div class="message" style="top: 5640px; left: 280px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">200 OK { url: "/uploads/media/..." }</span>
            <span class="message-protocol">JSON</span>
          </div>
        </div>
        
        <!-- Frontend -> Author: Preview -->
        <div class="message" style="top: 5690px; left: 70px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">–ü—Ä–µ–≤—å—é –º–µ–¥–∏–∞ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –≤–æ–ø—Ä–æ—Å–∞</span>
          </div>
        </div>
        
        <!-- SECTION 16: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–º –∏ –≤–æ–ø—Ä–æ—Å–æ–≤ -->
        <div class="section-divider" style="top: 5760px;">
          <span class="section-label">üìã 16. –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –¢–ï–ú –ò –í–û–ü–†–û–°–û–í</span>
        </div>
        
        <!-- Author -> Frontend: Duplicate topic -->
        <div class="message" style="top: 5810px; left: 70px; width: 210px;">
          <div class="message-line">
            <span class="message-text">–ù–∞–∂–∞—Ç–∏–µ "–î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–º—É"</span>
            <span class="message-protocol">UI click</span>
          </div>
        </div>
        
        <!-- Frontend -> Backend: POST duplicate -->
        <div class="message" style="top: 5860px; left: 280px; width: 210px;">
          <div class="message-line">
            <span class="message-text">POST /api/topics/:id/duplicate</span>
            <span class="message-protocol">HTTPS</span>
          </div>
        </div>
        
        <!-- Backend -> PostgreSQL: Copy topic + questions -->
        <div class="message" style="top: 5910px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">INSERT topic (copy) + questions (copy)</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- Note: —á—Ç–æ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è -->
        <div class="note" style="top: 5940px; left: 420px; background: #e8f5e9; border-color: #4caf50; max-width: 180px;">
          –ö–æ–ø–∏—Ä—É—é—Ç—Å—è: —Ç–µ–º–∞, –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã, —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –∫—É—Ä—Å—ã
        </div>
        
        <!-- Backend -> Frontend: new topic -->
        <div class="message" style="top: 6020px; left: 280px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">201 Created { topic, questions[] }</span>
            <span class="message-protocol">JSON</span>
          </div>
        </div>
        
        <!-- SECTION 17: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º —Ç–µ—Å—Ç–∞ -->
        <div class="section-divider" style="top: 6100px;">
          <span class="section-label">üéØ 17. –ê–î–ê–ü–¢–ò–í–ù–´–ô –†–ï–ñ–ò–ú –¢–ï–°–¢–ê</span>
        </div>
        
        <!-- Note: –æ–ø–∏—Å–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ -->
        <div class="note" style="top: 6140px; left: 70px; background: #e3f2fd; border-color: #2196f3; max-width: 250px;">
          –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º: –≤–æ–ø—Ä–æ—Å—ã –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –ø–æ —É—Ä–æ–≤–Ω—è–º —Å–ª–æ–∂–Ω–æ—Å—Ç–∏. –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞.
        </div>
        
        <!-- Author -> Frontend: Configure adaptive -->
        <div class="message" style="top: 6220px; left: 70px; width: 210px;">
          <div class="message-line">
            <span class="message-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Ä–æ–≤–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</span>
            <span class="message-protocol">UI</span>
          </div>
        </div>
        
        <!-- Frontend -> Backend: Save adaptive settings -->
        <div class="message" style="top: 6270px; left: 280px; width: 210px;">
          <div class="message-line">
            <span class="message-text">POST /api/tests { mode: "adaptive", adaptiveSettings }</span>
            <span class="message-protocol">HTTPS / JSON</span>
          </div>
        </div>
        
        <!-- Backend -> PostgreSQL: Save levels -->
        <div class="message" style="top: 6320px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">INSERT adaptive_levels, adaptive_level_links</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- Note: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Ä–æ–≤–Ω—è -->
        <div class="note" style="top: 6350px; left: 420px; background: #fff3e0; border-color: #ff9800; max-width: 200px;">
          –£—Ä–æ–≤–µ–Ω—å: minDifficulty, maxDifficulty, questionsCount, passThreshold, feedback, links[]
        </div>
        
        <!-- SCORM adaptive flow -->
        <div class="message" style="top: 6440px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">SCORM: adaptive.js –≤—ã–±–∏—Ä–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã –ø–æ difficulty</span>
            <span class="message-protocol">JS logic</span>
          </div>
        </div>
        
        <!-- SCORM -> Learner: Level achieved -->
        <div class="message" style="top: 6490px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">–ü–æ–∫–∞–∑ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è + feedback + —Å—Å—ã–ª–∫–∏ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</span>
            <span class="message-protocol">UI render</span>
          </div>
        </div>
        
        <!-- SECTION 18: –¢–∞–π–º–µ—Ä –∏ –ª–∏–º–∏—Ç –ø–æ–ø—ã—Ç–æ–∫ -->
        <div class="section-divider" style="top: 6570px;">
          <span class="section-label">‚è±Ô∏è 18. –¢–ê–ô–ú–ï–† –ò –õ–ò–ú–ò–¢ –ü–û–ü–´–¢–û–ö</span>
        </div>
        
        <!-- SCORM: Timer init -->
        <div class="message" style="top: 6620px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">initTimer() ‚Äî –∑–∞–ø—É—Å–∫ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞</span>
            <span class="message-protocol">JS</span>
          </div>
        </div>
        
        <!-- Note: timer settings -->
        <div class="note" style="top: 6650px; left: 1050px; background: #ffebee; border-color: #f44336; max-width: 180px;">
          TEST_DATA.timeLimitMinutes ‚Äî –ª–∏–º–∏—Ç –≤ –º–∏–Ω—É—Ç–∞—Ö. –ü—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ ‚Äî –∞–≤—Ç–æ–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ.
        </div>
        
        <!-- SCORM: Check attempts -->
        <div class="message" style="top: 6740px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">hasAttemptsLeft() ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –ø–æ–ø—ã—Ç–æ–∫</span>
            <span class="message-protocol">JS</span>
          </div>
        </div>
        
        <!-- Note: attempts in suspend_data -->
        <div class="note" style="top: 6770px; left: 1050px; background: #e8f5e9; border-color: #4caf50; max-width: 180px;">
          –ü–æ–ø—ã—Ç–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ cmi.suspend_data. getBestAttempt() –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à—É—é.
        </div>
        
        <!-- SECTION 19: –ü–æ–∫–∞–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ -->
        <div class="section-divider" style="top: 6860px;">
          <span class="section-label">‚úÖ 19. –ü–û–ö–ê–ó –ü–†–ê–í–ò–õ–¨–ù–´–• –û–¢–í–ï–¢–û–í</span>
        </div>
        
        <!-- Note: showCorrectAnswers -->
        <div class="note" style="top: 6900px; left: 860px; background: #e3f2fd; border-color: #2196f3; max-width: 220px;">
          –ï—Å–ª–∏ TEST_DATA.showCorrectAnswers=true ‚Äî –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
        </div>
        
        <!-- SCORM -> Learner: Show correct -->
        <div class="message" style="top: 6980px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">–ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö/–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤</span>
            <span class="message-protocol">UI render</span>
          </div>
        </div>
        
        <!-- SCORM -> Learner: Show feedback -->
        <div class="message" style="top: 7030px; left: 910px; width: 420px;">
          <div class="message-line">
            <span class="message-text">–ü–æ–∫–∞–∑ feedback –∫ –≤–æ–ø—Ä–æ—Å—É (general/conditional)</span>
            <span class="message-protocol">UI render</span>
          </div>
        </div>
        
        <!-- Note: feedback modes -->
        <div class="note" style="top: 7060px; left: 1050px; background: #fff3e0; border-color: #ff9800; max-width: 180px;">
          feedbackMode: "general" ‚Äî –æ–¥–∏–Ω —Ç–µ–∫—Å—Ç, "conditional" ‚Äî —Ä–∞–∑–Ω—ã–π –¥–ª—è –≤–µ—Ä–Ω–æ/–Ω–µ–≤–µ—Ä–Ω–æ
        </div>
        
        <!-- SECTION 20: Learner —Ä–µ–∂–∏–º (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π) -->
        <div class="section-divider" style="top: 7150px;">
          <span class="section-label">üéì 20. LEARNER –†–ï–ñ–ò–ú (–í–°–¢–†–û–ï–ù–ù–´–ô)</span>
        </div>
        
        <!-- Note: learner mode -->
        <div class="note" style="top: 7190px; left: 70px; background: #f3e5f5; border-color: #9c27b0; max-width: 250px;">
          –ü–æ–º–∏–º–æ SCORM –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π learner —Ä–µ–∂–∏–º –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –ø—Ä—è–º–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (–±–µ–∑ LMS)
        </div>
        
        <!-- Learner -> Frontend: Start test -->
        <div class="message" style="top: 7270px; left: 70px; width: 210px;">
          <div class="message-line">
            <span class="message-text">–í—ã–±–æ—Ä —Ç–µ—Å—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞</span>
            <span class="message-protocol">UI</span>
          </div>
        </div>
        
        <!-- Frontend -> Backend: POST /api/tests/:id/attempts/start -->
        <div class="message" style="top: 7320px; left: 280px; width: 210px;">
          <div class="message-line">
            <span class="message-text">POST /api/tests/:id/attempts/start</span>
            <span class="message-protocol">HTTPS</span>
          </div>
        </div>
        
        <!-- Backend -> PostgreSQL: CREATE attempt -->
        <div class="message" style="top: 7370px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">INSERT INTO attempts</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- Backend -> Frontend: attempt + variant -->
        <div class="message" style="top: 7420px; left: 280px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">201 Created { attemptId, variant, questions[] }</span>
            <span class="message-protocol">JSON</span>
          </div>
        </div>
        
        <!-- Frontend -> Learner: Test UI -->
        <div class="message" style="top: 7470px; left: 70px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞</span>
          </div>
        </div>
        
        <!-- Learner answers -->
        <div class="message" style="top: 7530px; left: 280px; width: 210px;">
          <div class="message-line">
            <span class="message-text">POST /api/attempts/:id/finish { answers }</span>
            <span class="message-protocol">HTTPS</span>
          </div>
        </div>
        
        <!-- Backend calculates results -->
        <div class="message" style="top: 7580px; left: 490px; width: 210px;">
          <div class="message-line">
            <span class="message-text">UPDATE attempts SET result_json...</span>
            <span class="message-protocol">SQL</span>
          </div>
        </div>
        
        <!-- Backend -> Frontend: results -->
        <div class="message" style="top: 7630px; left: 280px; width: 210px;">
          <div class="message-line dashed left">
            <span class="message-text">200 OK { percent, passed, topicResults[] }</span>
            <span class="message-protocol">JSON</span>
          </div>
        </div>
        
        <!-- Learner history -->
        <div class="message" style="top: 7700px; left: 280px; width: 210px;">
          <div class="message-line">
            <span class="message-text">GET /api/learner/attempts ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø–æ–ø—ã—Ç–æ–∫</span>
            <span class="message-protocol">HTTPS</span>
          </div>
        </div>
        
      </div>
    </div>
  </div>
  
  <div class="footer">
    <p>SCORM Test Constructor ‚Äî Call-Flow Diagram</p>
    <p style="margin-top: 5px;">–î–æ–∫—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω: <script>document.write(new Date().toLocaleString('ru-RU'));</script></p>
  </div>
</body>
</html>